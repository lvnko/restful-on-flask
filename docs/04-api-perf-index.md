[回到目錄](overview.md)

---

[上一章](03-status-codes-n-meaning.md)

[下一章](05-sessions-pros-n-cons.md)

---

## 4. 常見 API 效能指標

監控 API 的效能對於確保其穩定性和可靠性至關重要。以下是一些關鍵的效能指標：

*   **每秒請求數 (Requests Per Second, RPS)**
    *   **意義：** 指標量測伺服器在一秒鐘內能夠成功處理的請求數量。它反映了 API 的吞吐量和處理能力。
    *   **用途：** 用於評估 API 的負載能力，進行容量規劃，以及偵測效能瓶頸。較高的 RPS 通常表示較好的處理能力。

*   **回應時間 (Response Time / Latency)**
    *   **意義：** 指從客戶端發送請求到接收到伺服器完整回應所花費的總時間。通常以毫秒 (ms) 為單位。
    *   **用途：** 衡量 API 的反應速度。較低的回應時間表示使用者體驗較好。監控平均回應時間、P95/P99 百分位數回應時間（95% 或 99% 的請求在此時間內完成）有助於全面了解效能。
    *   **計算 P99 回應時間：**
        *   P99 回應時間指的是 99% 的請求其回應時間都「快於或等於」此數值。換句話說，只有 1% 的請求比這個值慢。
        *   計算步驟：
            1.  **收集數據：** 收集在特定時間段內所有請求的回應時間數據。
            2.  **排序：** 將所有收集到的回應時間由小到大排序。
            3.  **取值：** 找出排序後位於第 99 百分位數的值。例如，如果您有 1000 個請求記錄，P99 就是排序後第 990 個請求的回應時間 (1000 * 0.99 = 990)。如果有 100 個請求，P99 就是第 99 個請求的回應時間。
        *   **重要性：** P99 (以及 P95、P90 等百分位數) 比平均回應時間更能反映大多數使用者的體驗，因為它不容易受到極少數異常慢的請求影響，從而更準確地呈現 API 在高負載或峰值情況下的「最差情況」效能。

*   **錯誤率 (Error Rate)**
    *   **意義：** 指在一段時間內，導致錯誤（通常是 4xx 或 5xx 狀態碼）的請求佔總請求數量的百分比。
    *   **用途：** 反映 API 的穩定性和可靠性。持續偏高的錯誤率表示 API 可能存在問題（程式碼錯誤、資源不足、相依服務問題等），需要進行調查和修復。
